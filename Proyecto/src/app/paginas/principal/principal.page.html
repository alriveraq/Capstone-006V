<ion-app>
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button *ngIf="!logeado()" routerLink="/crear-junta">
          <ion-icon name="people-outline"></ion-icon>
        </ion-button>
      </ion-buttons>

      <ion-title>Principal</ion-title>
      <ion-buttons slot="end">
        <ion-button>
          <ion-icon name="notifications-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content>

    <div class="busqueda">
      <ion-searchbar placeholder="Busca tu junta" [(ngModel)]="searchTerm" (ionInput)="debounceFilter()"></ion-searchbar>
    </div>

    <section class="seccion">
      <ion-list *ngIf="searchTerm">
        <ion-item *ngFor="let junta of filteredjuntas" (click)="irjunta(junta.id_junta)">
          <ion-label>
            <h2>{{ junta.nombre }}</h2>
          </ion-label>
        </ion-item>
      </ion-list>
    </section>

    <h2>Últimas noticias</h2>

    <swiper-container autoplay="true" pagination="true" navigation="true" class="mySwiper">
      <ng-container *ngFor="let publicacion of publicaciones">
        <swiper-slide >
          <img class="imagenes" [src]="publicacion.imagen" alt="Imagen de la publicación" />  
          <div class="noticia-content">  
            <h3>{{ publicacion.titulo }}</h3>
            <p>{{ publicacion.contenido }}</p>
          </div>
        </swiper-slide>
      </ng-container>
    </swiper-container>


    <div *ngIf="publicaciones.length === 0">
      <p>No hay publicaciones disponibles.</p>
    </div>

    <h2>Anuncios</h2>
    <ion-list>
      <ion-item *ngFor="let reunion of reuniones">
        <ion-avatar slot="start"
          style="background-image: url('https://civantoscomunidades.com/wp-content/uploads/2020/06/dudas_sobre_el_presupueto_reunion_digitalmanetenimientos-800x600.png');"></ion-avatar>
        <ion-label>
          <h2>{{ reunion.tema }}</h2>
          <p>{{ reunion.fecha | date:'short' }}</p>
          <p><strong>Total Asistentes:</strong> {{ reunion.total_asistentes }}</p>
          <p><strong>Total No Asistentes:</strong> {{ reunion.total_no_asistentes }}</p>
        </ion-label>
        <div class="button-group">
          <ion-button color="success" (click)="confirmarAsistencia(reunion.id_reunion, true)">Sí</ion-button>
          <ion-button color="danger" (click)="confirmarAsistencia(reunion.id_reunion, false)">No</ion-button>
        </div>
      </ion-item>
    </ion-list>

    <h2>Proyectos</h2>
    <div class="proyectos">
      <div class="proyecto"
        style="background-image: url('https://civantoscomunidades.com/wp-content/uploads/2020/06/dudas_sobre_el_presupueto_reunion_digitalmanetenimientos-800x600.png');">
      </div>
      <div class="proyecto"
        style="background-image: url('https://civantoscomunidades.com/wp-content/uploads/2020/06/dudas_sobre_el_presupueto_reunion_digitalmanetenimientos-800x600.png');">
      </div>
      <div class="proyecto"
        style="background-image: url('https://civantoscomunidades.com/wp-content/uploads/2020/06/dudas_sobre_el_presupueto_reunion_digitalmanetenimientos-800x600.png');">
      </div>
    </div>
  </ion-content>

  <ion-footer>
    <ion-toolbar class="custom-toolbar">
      <div class="button-container">
        <ion-buttons routerLink="/principal">
          <ion-button>
            <ion-icon name="home-outline"></ion-icon>
            <ion-label>Inicio</ion-label>
          </ion-button>
        </ion-buttons>
        <ion-buttons class="center-button">
          <ion-button *ngIf="logeado()" (click)="navegarAInfoJunta()">
            <ion-icon name="people-outline"></ion-icon>
            <ion-label>Grupo</ion-label>
          </ion-button>
        </ion-buttons>
        <ion-buttons>
          <ion-button *ngIf="logeado()" (click)="navegarAInfoUsuario()">
            <ion-icon name="person-outline"></ion-icon>
            <ion-label>Perfil</ion-label>
          </ion-button>
        </ion-buttons>
      </div>
    </ion-toolbar>
  </ion-footer>

</ion-app>
